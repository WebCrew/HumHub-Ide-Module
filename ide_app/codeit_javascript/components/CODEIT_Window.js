function CODEIT_Window(t){this.htmlElement=t,this.initEventHandlers(),this.dragOffset={x:0,y:0},this.bringToFront(),this.dragAction=null,this.minSizeX=150,this.minSizeY=50,this.storedSize=null,this.appOwner=null,this.content=this.htmlElement.getChildById("WIN_CONTENT"),this.eventDispatcher=new CODEIT_EventDispatcher}CODEIT_Window.prototype.initEventHandlers=function(){CreateEventListener(this.htmlElement,"mousedown",this.onMouseDown,this)},CODEIT_Window.prototype.setTitle=function(t){var e=this.htmlElement.getChildById("WIN_TITLE");e.innerHTML=t},CODEIT_Window.prototype.open=function(t){if(this.htmlElement.style.display="block",1==t){var e=StageSize(),i=this.htmlElement.getSize();this.setPosition(e.x/2-i.x/2,e.y/2-i.y/2)}this.bringToFront()},CODEIT_Window.prototype.close=function(){this.htmlElement.style.display="none"},CODEIT_Window.prototype.isOpen=function(){return"block"==this.htmlElement.style.display?!0:!1},CODEIT_Window.prototype.bringToFront=function(){this.htmlElement.parentNode.maxLevel||(this.htmlElement.parentNode.maxLevel=1),this.htmlElement.parentNode.maxLevel++,this.htmlElement.style.zIndex=this.htmlElement.parentNode.maxLevel},CODEIT_Window.prototype.getPosition=function(){return{x:this.htmlElement.offsetLeft,y:this.htmlElement.offsetTop}},CODEIT_Window.prototype.setPosition=function(t,e){this.htmlElement.style.left=t+"px",this.htmlElement.style.top=e+"px"},CODEIT_Window.prototype.setSize=function(t,e){this.htmlElement.style.width=t+"px",this.htmlElement.style.height=e+"px"},CODEIT_Window.prototype.getSize=function(){return{x:this.htmlElement.offsetWidth,y:this.htmlElement.offsetHeight}},CODEIT_Window.prototype.onMouseDown=function(t){this.bringToFront();var e=t.srcElement?t.srcElement:t.target;if(e)if(e.parentNode&&"WIN_HEAD"==e.parentNode.getAttribute("id")||e.parentNode&&"WIN_TITLE"==e.parentNode.getAttribute("id")||e.getAttribute&&"WIN_HEAD"==e.getAttribute("id")){this.dragAction="DRAG_WIN";var i=this.getPosition();this.dragOffset.x=GLOBAL_MOUSE_LISTENER.mouseMovePt.x-i.x,this.dragOffset.y=GLOBAL_MOUSE_LISTENER.mouseMovePt.y-i.y,GLOBAL_MOUSE_LISTENER.objectTarget=this}else if(e.getAttribute&&"WIN_CLOSE_BUTTON"==e.getAttribute("id"))this.close();else if(e.getAttribute&&"WIN_RESIZE_BUTTON"==e.getAttribute("id")){this.dragAction="RESIZE_WIN";var i=this.getPosition(),s=this.getSize();this.dragOffset.x=i.x+s.x-GLOBAL_MOUSE_LISTENER.mouseMovePt.x,this.dragOffset.y=i.y+s.y-GLOBAL_MOUSE_LISTENER.mouseMovePt.y,GLOBAL_MOUSE_LISTENER.objectTarget=this}else if(e.getAttribute&&"WIN_COLLAPSE_BUTTON"==e.getAttribute("id"))if("none"==this.content.style.display){this.storedSize&&this.setSize(this.storedSize.x,this.storedSize.y),this.content.style.display="block";var o=this.htmlElement.getChildById("WIN_RESIZE_BUTTON");o.style.display="block"}else if(""==this.content.style.display||"block"==this.content.style.display){this.storedSize=this.getSize(),this.setSize(this.storedSize.x,24),this.content.style.display="none";var o=this.htmlElement.getChildById("WIN_RESIZE_BUTTON");o.style.display="none"}},CODEIT_Window.prototype.onGlobalMouseStartDrag=function(){},CODEIT_Window.prototype.onGlobalMouseEndDrag=function(){GLOBAL_MOUSE_LISTENER.objectTarget=null,this.dragAction=null},CODEIT_Window.prototype.onGlobalMouseDrag=function(t){if("DRAG_WIN"==this.dragAction)this.setPosition(GLOBAL_MOUSE_LISTENER.mouseMovePt.x-this.dragOffset.x,GLOBAL_MOUSE_LISTENER.mouseMovePt.y-this.dragOffset.y);else if("RESIZE_WIN"==this.dragAction){var e=this.getPosition(),i=GLOBAL_MOUSE_LISTENER.mouseMovePt.x-e.x+this.dragOffset.x,s=GLOBAL_MOUSE_LISTENER.mouseMovePt.y-e.y+this.dragOffset.y;i<this.minSizeX&&(i=this.minSizeX),s<this.minSizeY&&(s=this.minSizeY),this.setSize(i,s)}};