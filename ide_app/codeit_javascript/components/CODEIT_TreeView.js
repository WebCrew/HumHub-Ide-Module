function CODEIT_TreeView(e){this.htmlElement=e,CreateEventListener(this.htmlElement,"mousedown",this.onMouseDown,this),this.unselectedNodeClassName="unselectedNode",this.selectedNodeClassName="selectedNode",this.collapsedNodeClassName="collapsedNode",this.expandedNodeClassName="expandedNode",this.dragOverNodeClassName="dragOverNode",this.selectedNodes=[],this.lastMouseDownTime=null}CODEIT_TreeView.prototype.onMouseDown=function(e){if("LI"==e.target.parentElement.nodeName){if("A"==e.target.nodeName)this.expandOrCollapseNode(e.target.parentElement);else if("DIV"==e.target.nodeName)return this.selectNode(e.target.parentElement),void(this.isDoubleClick()&&this.onDoubleClickOnNodeName(e.target));3==e.which&&this.showNodeContextMenu(e)}},CODEIT_TreeView.prototype.isDoubleClick=function(){var e=(new Date).getTime();return e-this.lastMouseDownTime<250?!0:(this.lastMouseDownTime=e,!1)},CODEIT_TreeView.prototype.onDoubleClickOnNodeName=function(e){this.editNodeName(e)},CODEIT_TreeView.prototype.disableDraggableNodes=function(){for(var e=document.querySelectorAll("#"+this.htmlElement.getAttribute("id")+' li[draggable="true"]'),t=0;t<e.length;t++)e[t].setAttribute("draggable","disabled")},CODEIT_TreeView.prototype.enableDraggableNodes=function(){for(var e=document.querySelectorAll("#"+this.htmlElement.getAttribute("id")+' li[draggable="disabled"]'),t=0;t<e.length;t++)e[t].setAttribute("draggable","true")},CODEIT_TreeView.prototype.editNodeName=function(e){this.disableDraggableNodes();var t=e.textContent;e.innerHTML='<input type="text"  class="inputNodeName" value="'+t+'"  onBlur="if(this.value==\'\')this.value=this.previousValue;  if(this.value!=this.previousValue) this.onChangedValue(this); this.parentNode.innerHTML=this.value;" ></input>';var s=this;setTimeout(function(){e.firstChild.previousValue=t,e.firstChild.focus(),e.firstChild.onChangedValue=function(e){s.onEndEditNodeName(e)}},100)},CODEIT_TreeView.prototype.onEndEditNodeName=function(e){this.enableDraggableNodes()},CODEIT_TreeView.prototype.showNodeContextMenu=function(e){},CODEIT_TreeView.prototype.expandOrCollapseNode=function(e){var t=this.getNodeElement_ul(e);return t&&("none"==t.style.display||""==t.style.display?this.expandNode(e):this.collapseNode(e)),t},CODEIT_TreeView.prototype.expandNode=function(e){e.classList.remove(this.collapsedNodeClassName),e.classList.add(this.expandedNodeClassName);var t=this.getNodeElement_ul(e);return t.style.display="block",t.hasAttribute("url")&&(t.innerHTML="",this.loadNodeChildren(t.getAttribute("url"),t)),t},CODEIT_TreeView.prototype.collapseNode=function(e){this.getNodeElement_ul(e).style.display="none",e.classList.remove(this.expandedNodeClassName),e.classList.add(this.collapsedNodeClassName)},CODEIT_TreeView.prototype.loadNodeChildren=function(e,t){},CODEIT_TreeView.prototype.getNodeElement_ul=function(e){return e.getElementsByTagName("ul")[0]},CODEIT_TreeView.prototype.selectNode=function(e){this.deselectAllNodes(),this.selectedNodes.push(e),e.classList.remove(this.unselectedNodeClassName),e.classList.add(this.selectedNodeClassName)},CODEIT_TreeView.prototype.deselectNode=function(e){var t=this.selectedNodes.indexOf(e);-1!=t&&(this.selectedNodes.splice(t,1),e.classList.remove(this.selectedNodeClassName),e.classList.add(this.unselectedNodeClassName))},CODEIT_TreeView.prototype.deselectAllNodes=function(){for(var e=this.selectedNodes.length,t=0;e>t;t++)this.selectedNodes[t].classList.remove(this.selectedNodeClassName),this.selectedNodes[t].classList.add(this.unselectedNodeClassName);this.selectedNodes=[]},CODEIT_TreeView.prototype.createTreeViewNode=function(e,t,s,o){var l=document.createElement("li");l.className="collapsedNode",l.setAttribute("title",s);var i=document.createElement("a");i.innerHTML="&nbsp",l.appendChild(i);var d=document.createElement("div");return d.className="treeViewItemIcon_"+e,d.innerHTML=t,l.appendChild(d),1==o&&(element_ul=document.createElement("ul"),l.appendChild(element_ul)),l};